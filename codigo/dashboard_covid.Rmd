---
title: "COVID-19 Óbitos"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    horizontal_layout: fill
    navbar:
      - { title: "Sobre", href: "https://example.com/about" }
    source_code: "https://github.com/DaInLab/PPGMiT-openDataSUS.git"
runtime: shyni    
---
<style type="text/css">
.value-box .value {
    color: white;
}
.value-box .caption {
    color: white;
    font: 10;
}
</style>


```{r setup, include=FALSE}
knitr::opts_chunk$set("'D:/GoogleDrive/Mestrado/PPGMiT-openDataSUS'") 

# Diretorio da Trabalho
setwd('D:/GoogleDrive/Mestrado/PPGMiT-openDataSUS')

# Carregando as bibliotecas necessárias
if (!("ggplot2") %in% installed.packages()) install.packages("ggplot2")   
if (!("dplyr") %in% installed.packages()) install.packages("dplyr")
if (!("readr") %in% installed.packages()) install.packages("readr")
if (!("geobr") %in% installed.packages()) install.packages("geobr")
if (!("scales") %in% installed.packages()) install.packages("scales")
if (!("ggspatial") %in% installed.packages()) install.packages("ggspatial")
if (!("kableExtra") %in% installed.packages()) install.packages("kableExtra")
if (!("knitr") %in% installed.packages()) install.packages("knitr")

library(ggplot2) # Visualizacao dos dados
library(dplyr)   # Preparacao de dados
library(readr)   # Importacao dos dados
library(geobr)   # Mapa do Brasil
library(scales)
library(ggspatial)
library(flexdashboard)
library(knitr)
library(kableExtra)


# Importacao do arquivo : opendatasus_covid.csv
df_covid<- read.csv('D:/GoogleDrive/Mestrado/PPGMiT-openDataSUS/dados/covid.csv', sep=";")

# Numero Notificacoes 
num_notificacoes <- as.numeric(count(df_covid))
num_notificacoes_ano <- aggregate(df_covid$ANO_NOTIFIC,by=list(df_covid$ANO_NOTIFIC), FUN=length)
num_notificacoes_ano <- setNames(num_notificacoes_ano, c("Ano", "Notificações"))

num_notificacoes_2021 <- as.numeric(num_notificacoes_ano[num_notificacoes_ano$Ano == "2021",2])
num_notificacoes_2022 <- as.numeric(num_notificacoes_ano[num_notificacoes_ano$Ano == "2022",2])
num_notificacoes_2023 <- as.numeric(num_notificacoes_ano[num_notificacoes_ano$Ano == "2023",2])

```

Visão Geral
===

Column {data-height=200; data-width=180}
------

### Numero Notificações COVID-19 {.no-title}

```{r}


valueBox(format(num_notificacoes, big.mark = ".") , caption = "Notificações COVID-19", color="black")



```


### Numero Notificações COVID-19 {.no-title}

```{r}

num_notificacoes_ano %>%
  kable("html", escape = F) %>%
  kable_styling("striped", full_width = F)

#valueBox(format(num_notificacoes, big.mark = ".") , caption = "Notificações COVID-19", color="black")

```



### Obitos {.no-title}

```{r}
gauge(55, min = 0, max = 100, symbol = '%', label="Obitos %", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

### Óbitos Outras Doenças {.no-title}

```{r}
gauge(13, min = 0, max = 100, symbol = '%', label="Óbitos Outras Doenças",gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

### Cura {.no-title}

```{r}
gauge(30, min = 0, max = 100, symbol = '%', label="Cura %", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```


### Sem Informação {.no-title}

```{r}
gauge(2, min = 0, max = 100, symbol = '%', label= "Sem Informação", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

Column {.tabset}
---
### Mapa Óbitos Brasil

```{r}

```

### Fatores de Risco 

```{r}

```

### Sinais e Sintomas

```{r}

```

### Idade

```{r}

```

### Sexo

```{r}

```

### Escolaridade

```{r}

```


Column {data-height=200; data-width=250}
------

### {.no-title}

```{r}
valueBox(0, caption = "Numero Óbitos", color="red")

```

### {.no-title}

```{r}
valueBox('Diabetes Mellitus', caption = "Principal Fator de Risco - Óbitos", color="brown")

```


### {.no-title}

```{r}
valueBox('Dor de Garganta', caption = "Principal Sinal ou Sintoma - Óbitos", color="orange")

```

### {.no-title}

```{r}
valueBox(46.5, caption = "Média Idade Óbitos", color="blue")

```

### {.no-title}

```{r}
valueBox('Masculino', caption = "Sexo", color="gray")

```

### {.no-title}

```{r}
valueBox('Superior', caption = "Escolaridade", color="gray")

```


2021
===

Column {data-height=200; data-width=180}
------

### Numero Notificações {.no-title}

```{r}
valueBox(format(num_notificacoes_2021, big.mark = ".") , caption = "Notificações COVID-19", color="black")

```


### Obitos {.no-title}

```{r}
gauge(55, min = 0, max = 100, symbol = '%', label="Obitos %", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

### Óbitos Outras Doenças {.no-title}

```{r}
gauge(13, min = 0, max = 100, symbol = '%', label="Óbitos Outras Doenças",gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

### Cura {.no-title}

```{r}
gauge(30, min = 0, max = 100, symbol = '%', label="Cura %", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```


### Sem Informação {.no-title}

```{r}
gauge(2, min = 0, max = 100, symbol = '%', label= "Sem Informação", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

Column {.tabset}
---
### Mapa Óbitos Brasil

```{r}

```

### Fatores de Risco 

```{r}

```

### Sinais e Sintomas

```{r}

```

### Idade

```{r}

```

### Sexo

```{r}

```

### Escolaridade

```{r}

```


Column {data-height=200; data-width=250}
------

### {.no-title}

```{r}
valueBox(1007, caption = "Numero Óbitos", color="red")

```

### {.no-title}

```{r}
valueBox('Diabetes Mellitus', caption = "Principal Fator de Risco - Óbitos", color="brown")

```


### {.no-title}

```{r}
valueBox('Dor de Garganta', caption = "Principal Sinal ou Sintoma - Óbitos", color="orange")

```

### {.no-title}

```{r}
valueBox(46.5, caption = "Média Idade Óbitos", color="blue")

```

### {.no-title}

```{r}
valueBox('Masculino', caption = "Sexo", color="gray")

```

### {.no-title}

```{r}
valueBox('Superior', caption = "Escolaridade", color="gray")

```

2022
===

Column {data-height=200; data-width=180}
------

### Numero Notificações {.no-title}

```{r}
valueBox(format(num_notificacoes_2022, big.mark = ".") , caption = "Notificações COVID-19", color="black")

```


### Obitos {.no-title}

```{r}
gauge(55, min = 0, max = 100, symbol = '%', label="Obitos %", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

### Óbitos Outras Doenças {.no-title}

```{r}
gauge(13, min = 0, max = 100, symbol = '%', label="Óbitos Outras Doenças",gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

### Cura {.no-title}

```{r}
gauge(30, min = 0, max = 100, symbol = '%', label="Cura %", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```


### Sem Informação {.no-title}

```{r}
gauge(2, min = 0, max = 100, symbol = '%', label= "Sem Informação", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

Column {.tabset}
---
### Mapa Óbitos Brasil

```{r}

```

### Fatores de Risco 

```{r}

```

### Sinais e Sintomas

```{r}

```

### Idade

```{r}

```

### Sexo

```{r}

```

### Escolaridade

```{r}

```


Column {data-height=200; data-width=250}
------

### {.no-title}

```{r}
valueBox(150007, caption = "Numero Óbitos", color="red")

```

### {.no-title}

```{r}
valueBox('Diabetes Mellitus', caption = "Principal Fator de Risco - Óbitos", color="brown")

```


### {.no-title}

```{r}
valueBox('Dor de Garganta', caption = "Principal Sinal ou Sintoma - Óbitos", color="orange")

```

### {.no-title}

```{r}
valueBox(46.5, caption = "Média Idade Óbitos", color="blue")

```

### {.no-title}

```{r}
valueBox('Masculino', caption = "Sexo", color="gray")

```

### {.no-title}

```{r}
valueBox('Superior', caption = "Escolaridade", color="gray")

```


2023
===

Column {data-height=200; data-width=180}
------

### Numero Notificações {.no-title}

```{r}
valueBox(format(num_notificacoes_2023, big.mark = ".") , caption = "Notificações COVID-19", color="black")

```


### Obitos {.no-title}

```{r}
gauge(55, min = 0, max = 100, symbol = '%', label="Obitos %", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

### Óbitos Outras Doenças {.no-title}

```{r}
gauge(13, min = 0, max = 100, symbol = '%', label="Óbitos Outras Doenças",gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

### Cura {.no-title}

```{r}
gauge(30, min = 0, max = 100, symbol = '%', label="Cura %", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```


### Sem Informação {.no-title}

```{r}
gauge(2, min = 0, max = 100, symbol = '%', label= "Sem Informação", gaugeSectors(
  success = c(0, 39), warning = c(40, 79), danger = c(80, 100)))

```

Column {.tabset}
---
### Mapa Óbitos Brasil

```{r}

```

### Fatores de Risco 

```{r}

```

### Sinais e Sintomas

```{r}

```

### Idade

```{r}

```

### Sexo

```{r}

```

### Escolaridade

```{r}

```


Column {data-height=200; data-width=250}
------

### {.no-title}

```{r}
valueBox(150007, caption = "Numero Óbitos", color="red")

```

### {.no-title}

```{r}
valueBox('Diabetes Mellitus', caption = "Principal Fator de Risco - Óbitos", color="brown")

```


### {.no-title}

```{r}
valueBox('Dor de Garganta', caption = "Principal Sinal ou Sintoma - Óbitos", color="orange")

```

### {.no-title}

```{r}
valueBox(46.5, caption = "Média Idade Óbitos", color="blue")

```

### {.no-title}

```{r}
valueBox('Masculino', caption = "Sexo", color="gray")

```

### {.no-title}

```{r}
valueBox('Superior', caption = "Escolaridade", color="gray")

```