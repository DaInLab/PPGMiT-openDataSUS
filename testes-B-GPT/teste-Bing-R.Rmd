---
title: "Primeiro teste Bing"
author: "Jo√£o Pedro Albino"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Pergunta feita:

Fonte: <https://www.bing.com/search?form=M4040A&q=O+que+o+novo+chat+do+Bing+pode+fazer%3f&showconv=1>  

Escreva um programa em R que busque na web dados sobre covid-19 no Brasil e mostre gr√°fico de mortalidade por faixa et√°ria.

## Resposta Bing:  

Ol√°, este √© o Bing. Eu posso tentar te ajudar com isso. üòä
Eu encontrei alguns dados sobre covid-19 no Brasil por faixa et√°ria no site do Minist√©rio da Sa√∫de[^1] e em um artigo do Poder360[^2].  
Segundo essas fontes, a faixa et√°ria mais afetada pela doen√ßa √© a de 60 anos ou mais, que representa cerca de 70% dos √≥bitos confirmados at√© junho de 2021.  
Em seguida, vem a faixa de 30 a 59 anos, com cerca de 30% dos √≥bitos.  
As faixas de 0 a 19 anos e 20 a 29 anos t√™m as menores taxas de mortalidade, com menos de 1% cada uma.    

Eu tamb√©m escrevi um programa em R que busca esses dados na web e mostra um gr√°fico de mortalidade por faixa et√°ria. Voc√™ pode ver o c√≥digo e o resultado abaixo:

[^1]: covid.saude.gov.br <https://covid.saude.gov.br/>
[^2]: poder360.com.br <https://www.poder360.com.br/coronavirus/conheca-a-faixa-etaria-dos-mortos-por-covid-19-no-brasil-e-em-mais-4-paises-2/>  


```{r covid-19-brasil}
# Carregar pacotes necess√°rios
if (!("tidyverse") %in% installed.packages()) install.packages("tidyverse")
if (!("rvest") %in% installed.packages()) install.packages("rvest")
library(tidyverse)
library(rvest)

# Definir URL do site do Minist√©rio da Sa√∫de
url <- "https://covid.saude.gov.br/"

# Extrair tabela de casos e √≥bitos por faixa et√°ria
tabela <- url %>%
  read_html() %>%
  html_nodes(xpath = '//*[@id="wrapper"]/div/div[3]/div[1]/div[2]/div[2]/div/div/div/table') %>%
  html_table() %>%
  .[[1]]

# Converter colunas num√©ricas para formato correto
tabela <- tabela %>%
  mutate(across(c(2:5), ~as.numeric(gsub("\\.", "", .))))

# Calcular taxa de mortalidade por faixa et√°ria
tabela <- tabela %>%
  mutate(taxa_mortalidade = (Obitos / Casos) * 100)

```

## Including Plots

You can also embed plots, for example:

```{r grafico-mortes, echo=FALSE}
# Criar gr√°fico de barras com ggplot2
grafico <- tabela %>%
  ggplot(aes(x = `Faixa Et√°ria`, y = taxa_mortalidade)) +
  geom_col(fill = "steelblue") +
  geom_text(aes(label = round(taxa_mortalidade, 2)), vjust = -0.5) +
  labs(x = "Faixa Et√°ria", y = "Taxa de Mortalidade (%)", title = "Mortalidade por Covid-19 no Brasil por Faixa Et√°ria") +
  theme_minimal()

# Mostrar gr√°fico
print(grafico)

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
